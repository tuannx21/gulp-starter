!function c(i,l,d){function u(t,e){if(!l[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(a)return a(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};i[t][0].call(r.exports,function(e){return u(i[t][1][e]||e)},r,r.exports,c,i,l,d)}return l[t].exports}for(var a="function"==typeof require&&require,e=0;e<d.length;e++)u(d[e]);return u}({1:[function(e,t,o){"use strict";var l,d=e("./todo-function"),u="all",n=function(i){l.map(function(e){var t=document.querySelector("#todo-template").content.cloneNode(!0),o=t.querySelector("li");switch(i){case"uncomplete":o.style.display=!0===e.completed?"none":"block";break;case"completed":o.style.display=!0===e.completed?"block":"none";break;default:o.style.display="block"}o.id="todo".concat(e.id);var n=o.querySelector("#input-todo"),r=o.querySelector("#remove-todo"),c=o.querySelector("#complete-todo");n.value=e.title,!0===e.completed?(n.style.textDecoration="line-through",n.style.opacity=".3",c.style.opacity="1"):(n.style.textDecoration="none",n.style.opacity="1",c.style.opacity=".3"),o.addEventListener("mouseover",function(){r.classList.add("active"),c.classList.add("active")}),o.addEventListener("mouseout",function(){r.classList.remove("active"),c.classList.remove("active")}),n.addEventListener("dblclick",function(){this.readOnly=!1}),n.addEventListener("blur",function(){n.readOnly=!0,l=""!==n.value?(0,d.updateTodo)(l,{id:e.id,title:n.value}):(0,d.removeTodo)(l,e),a(i)}),n.addEventListener("keypress",function(){13!==event.which&&13!==event.keyCode||(l=(0,d.updateTodo)(l,{id:e.id,title:n.value}),a())}),r.addEventListener("click",function(){l=(0,d.removeTodo)(l,e),a(i)}),c.addEventListener("click",function(){l=(0,d.toggleTodo)(l,e),a(i)}),document.querySelector("#todo-list").appendChild(t)}),window.localStorage.setItem("todos",JSON.stringify(l))},a=function(){switch(function(){for(var e=document.querySelector("#todo-list");e.firstChild;)e.removeChild(e.firstChild)}(),n(u),document.querySelector("#all").innerHTML=l.length,document.querySelector("#remaining").innerHTML=(0,d.remainingTodos)(l).length,u){case"completed":document.querySelector("#show-completed").classList.add("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.remove("active");break;case"uncomplete":document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.add("active"),document.querySelector("#show-all").classList.remove("active");break;default:document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.add("active")}};!function(){var e;e=JSON.parse(window.localStorage.getItem("todos")),l=null===e?[]:e,a();var t=document.querySelector("#input-new-todo"),o=document.querySelector("#complete-all-todo"),n=document.querySelector("#show-all"),r=document.querySelector("#show-uncomplete"),c=document.querySelector("#show-completed"),i=document.querySelector("#uncomplete-all-todo");t.addEventListener("keypress",function(e){13!==e.which&&13!==e.keyCode||(l=(0,d.addTodo)(l,t.value),t.value="",a())}),o.addEventListener("click",function(){(0,d.completeAll)(l),a()}),i.addEventListener("click",function(){(0,d.uncompleteAll)(l),a()}),n.addEventListener("click",function(){u="all",a()}),r.addEventListener("click",function(){u="uncomplete",a()}),c.addEventListener("click",function(){u="completed",a()}),a()}()},{"./todo-function":2}],2:[function(e,t,o){"use strict";function c(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(o,"__esModule",{value:!0}),o.remainingTodos=o.uncompleteAll=o.completeAll=o.toggleTodo=o.updateTodo=o.removeTodo=o.addTodo=void 0;o.addTodo=function(e,t){return""!==t?[].concat(c(e),[{id:e.reduce(function(e,t){return e.id>t.id?e.id:t.id},0)+1,title:t,completed:!1}]):(alert("u must type something first !!"),e)};o.removeTodo=function(e,t){var o=t.id;return e.filter(function(e){return e.id!==o})};o.updateTodo=function(e,t){var o=t.id,n=t.title,r=c(e);return r[r.findIndex(function(e){return e.id===o})].title=n,r};o.toggleTodo=function(e,t){var o=t.id,n=c(e),r=n.findIndex(function(e){return e.id===o});return n[r].completed=!n[r].completed,n};o.completeAll=function(e){return e.map(function(e){return e.completed=!0})};o.uncompleteAll=function(e){return e.map(function(e){return e.completed=!1})};o.remainingTodos=function(e){return e.filter(function(e){return!1===e.completed})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5taW4uanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiVG9kb0xpc3QiLCJfdG9kb0Z1bmN0aW9uIiwiY3VycmVudE1vZGUiLCJzaG93VG9kb3MiLCJtb2RlIiwibWFwIiwidG9kbyIsImNsb25lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInRvZG9JdGVtIiwic3R5bGUiLCJkaXNwbGF5IiwiY29tcGxldGVkIiwiaWQiLCJjb25jYXQiLCJpbnB1dCIsInJlbW92ZSIsImNvbXBsZXRlIiwidmFsdWUiLCJ0aXRsZSIsInRleHREZWNvcmF0aW9uIiwib3BhY2l0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aGlzIiwicmVhZE9ubHkiLCJ1cGRhdGVUb2RvIiwicmVtb3ZlVG9kbyIsInJlcmVuZGVyIiwiZXZlbnQiLCJ3aGljaCIsImtleUNvZGUiLCJ0b2dnbGVUb2RvIiwiYXBwZW5kQ2hpbGQiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRvZG9MaXN0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJUb2RvcyIsImlubmVySFRNTCIsInJlbWFpbmluZ1RvZG9zIiwiVG9kb0xpc3RGcm9tTG9jYWxTdG9yYWdlIiwicGFyc2UiLCJnZXRJdGVtIiwiaW5wdXROZXdUb2RvIiwiY29tcGxldGVBbGxUb2RvIiwic2hvd0FsbFRvZG8iLCJzaG93VW5jb21wbGV0ZVRvZG8iLCJzaG93Q29tcGxldGVkVG9kbyIsInVuY29tcGxldGVBbGxUb2RvIiwiYWRkVG9kbyIsImNvbXBsZXRlQWxsIiwidW5jb21wbGV0ZUFsbCIsIlRvZG9BcHAiLCIuL3RvZG8tZnVuY3Rpb24iLCIyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsIl9hcnJheVdpdGhvdXRIb2xlcyIsIml0ZXIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiZnJvbSIsIl9pdGVyYWJsZVRvQXJyYXkiLCJUeXBlRXJyb3IiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJkZWZpbmVQcm9wZXJ0eSIsInRvZG9zQmVmb3JlQWRkIiwicmVkdWNlIiwiYiIsImFsZXJ0IiwidG9kb3NCZWZvcmVSZW1vdmUiLCJfcmVmIiwiZmlsdGVyIiwidG9kb3NCZWZvcmVVcGRhdGUiLCJfcmVmMiIsInRlbXAiLCJmaW5kSW5kZXgiLCJfcmVmMyIsInRvZG9zIl0sIm1hcHBpbmdzIjoiQ0FBWSxTQUFTQSxFQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFNBQVNDLEVBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxJQUFJRSxFQUFFLG1CQUFtQkMsU0FBU0EsUUFBUSxJQUFJRixHQUFHQyxFQUFFLE9BQU9BLEVBQUVGLEdBQUUsR0FBSSxHQUFHSSxFQUFFLE9BQU9BLEVBQUVKLEdBQUUsR0FBSSxJQUFJSyxFQUFFLElBQUlDLE1BQU0sdUJBQXVCTixFQUFFLEtBQUssTUFBTUssRUFBRUUsS0FBSyxtQkFBbUJGLEVBQUUsSUFBSUcsRUFBRVgsRUFBRUcsR0FBRyxDQUFDUyxRQUFRLElBQUliLEVBQUVJLEdBQUcsR0FBR1UsS0FBS0YsRUFBRUMsUUFBUSxTQUFTZCxHQUFvQixPQUFPSSxFQUFsQkgsRUFBRUksR0FBRyxHQUFHTCxJQUFlQSxJQUFJYSxFQUFFQSxFQUFFQyxRQUFRZCxFQUFFQyxFQUFFQyxFQUFFQyxHQUFHLE9BQU9ELEVBQUVHLEdBQUdTLFFBQVEsSUFBSSxJQUFJTCxFQUFFLG1CQUFtQkQsU0FBU0EsUUFBUUgsRUFBRSxFQUFFQSxFQUFFRixFQUFFYSxP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SUFBSXRFLEVBQUtzRSxFQUFLdEUsR0FDZCxPQUFPcUUsRUFBa0JFLE9BQU8sU0FBVWpGLEdBQ3hDLE9BQU9BLEVBQUtVLEtBQU9BLEtBa0J2QnJCLEVBQVFtQyxXQVpTLFNBQW9CMEQsRUFBbUJDLEdBQ3RELElBQUl6RSxFQUFLeUUsRUFBTXpFLEdBQ1hNLEVBQVFtRSxFQUFNbkUsTUFFZG9FLEVBQU8xQixFQUFtQndCLEdBSzlCLE9BSEFFLEVBQUtBLEVBQUtDLFVBQVUsU0FBVXJGLEdBQzVCLE9BQU9BLEVBQUtVLEtBQU9BLEtBQ2pCTSxNQUFRQSxFQUNMb0UsR0FpQlQvRixFQUFReUMsV0FaUyxTQUFvQm9ELEVBQW1CSSxHQUN0RCxJQUFJNUUsRUFBSzRFLEVBQU01RSxHQUVYMEUsRUFBTzFCLEVBQW1Cd0IsR0FFMUJ0RyxFQUFJd0csRUFBS0MsVUFBVSxTQUFVckYsR0FDL0IsT0FBT0EsRUFBS1UsS0FBT0EsSUFHckIsT0FEQTBFLEVBQUt4RyxHQUFHNkIsV0FBYTJFLEVBQUt4RyxHQUFHNkIsVUFDdEIyRSxHQVdUL0YsRUFBUWdFLFlBTlUsU0FBcUJrQyxHQUNyQyxPQUFPQSxFQUFNeEYsSUFBSSxTQUFVQyxHQUN6QixPQUFPQSxFQUFLUyxXQUFZLEtBWTVCcEIsRUFBUWlFLGNBTlksU0FBdUJpQyxHQUN6QyxPQUFPQSxFQUFNeEYsSUFBSSxTQUFVQyxHQUN6QixPQUFPQSxFQUFLUyxXQUFZLEtBWTVCcEIsRUFBUXFELGVBTmEsU0FBd0I2QyxHQUMzQyxPQUFPQSxFQUFNTixPQUFPLFNBQVVqRixHQUM1QixPQUEwQixJQUFuQkEsRUFBS1MsY0FNZCxLQUFLLEdBQUcsQ0FBQyIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIF90b2RvRnVuY3Rpb24gPSByZXF1aXJlKFwiLi90b2RvLWZ1bmN0aW9uXCIpO1xuXG52YXIgVG9kb0xpc3Q7XG52YXIgY3VycmVudE1vZGUgPSAnYWxsJzsgLy9BcHAgXG5cbnZhciBpbml0aWFsID0gZnVuY3Rpb24gaW5pdGlhbCgpIHtcbiAgdmFyIFRvZG9MaXN0RnJvbUxvY2FsU3RvcmFnZSA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvcycpKTtcblxuICBpZiAoVG9kb0xpc3RGcm9tTG9jYWxTdG9yYWdlID09PSBudWxsKSB7XG4gICAgVG9kb0xpc3QgPSBbXTtcbiAgfSBlbHNlIHtcbiAgICBUb2RvTGlzdCA9IFRvZG9MaXN0RnJvbUxvY2FsU3RvcmFnZTtcbiAgfVxufTtcblxudmFyIHNhdmVUb0xvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIHNhdmVUb0xvY2FsU3RvcmFnZSgpIHtcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KFRvZG9MaXN0KSk7XG59O1xuXG52YXIgY2xlYXJUb2RvcyA9IGZ1bmN0aW9uIGNsZWFyVG9kb3MoKSB7XG4gIHZhciB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvLWxpc3QnKTtcblxuICB3aGlsZSAodG9kb0xpc3QuZmlyc3RDaGlsZCkge1xuICAgIHRvZG9MaXN0LnJlbW92ZUNoaWxkKHRvZG9MaXN0LmZpcnN0Q2hpbGQpO1xuICB9XG59O1xuXG52YXIgc2hvd1RvZG9zID0gZnVuY3Rpb24gc2hvd1RvZG9zKG1vZGUpIHtcbiAgVG9kb0xpc3QubWFwKGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tdGVtcGxhdGUnKTtcbiAgICB2YXIgY2xvbmUgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICB2YXIgdG9kb0l0ZW0gPSBjbG9uZS5xdWVyeVNlbGVjdG9yKCdsaScpO1xuXG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICd1bmNvbXBsZXRlJzpcbiAgICAgICAgdG9kb0l0ZW0uc3R5bGUuZGlzcGxheSA9IHRvZG8uY29tcGxldGVkID09PSB0cnVlID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6XG4gICAgICAgIHRvZG9JdGVtLnN0eWxlLmRpc3BsYXkgPSB0b2RvLmNvbXBsZXRlZCA9PT0gdHJ1ZSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0b2RvSXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG5cbiAgICB0b2RvSXRlbS5pZCA9IFwidG9kb1wiLmNvbmNhdCh0b2RvLmlkKTtcbiAgICB2YXIgaW5wdXQgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtdG9kbycpO1xuICAgIHZhciByZW1vdmUgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjcmVtb3ZlLXRvZG8nKTtcbiAgICB2YXIgY29tcGxldGUgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjY29tcGxldGUtdG9kbycpO1xuICAgIGlucHV0LnZhbHVlID0gdG9kby50aXRsZTsgLy8gaW5wdXQuc3R5bGUudGV4dERlY29yYXRpb24gPSB0b2RvLmNvbXBsZXRlZCA9PT0gdHJ1ZSA/ICdsaW5lLXRocm91Z2gnIDogJ25vbmUnXG4gICAgLy8gaW5wdXQuc3R5bGUub3BhY2l0eSA9IHRvZG8uY29tcGxldGVkID09PSB0cnVlID8gJy4zJyA6ICcxJ1xuXG4gICAgaWYgKHRvZG8uY29tcGxldGVkID09PSB0cnVlKSB7XG4gICAgICBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgaW5wdXQuc3R5bGUub3BhY2l0eSA9ICcuMyc7XG4gICAgICBjb21wbGV0ZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJztcbiAgICAgIGlucHV0LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICBjb21wbGV0ZS5zdHlsZS5vcGFjaXR5ID0gJy4zJztcbiAgICB9XG5cbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBjb21wbGV0ZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGNvbXBsZXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5yZWFkT25seSA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpbnB1dC5yZWFkT25seSA9IHRydWU7XG5cbiAgICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi51cGRhdGVUb2RvKShUb2RvTGlzdCwge1xuICAgICAgICAgIGlkOiB0b2RvLmlkLFxuICAgICAgICAgIHRpdGxlOiBpbnB1dC52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRvZG9MaXN0ID0gKDAsIF90b2RvRnVuY3Rpb24ucmVtb3ZlVG9kbykoVG9kb0xpc3QsIHRvZG8pO1xuICAgICAgfVxuXG4gICAgICByZXJlbmRlcihtb2RlKTtcbiAgICB9KTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi51cGRhdGVUb2RvKShUb2RvTGlzdCwge1xuICAgICAgICAgIGlkOiB0b2RvLmlkLFxuICAgICAgICAgIHRpdGxlOiBpbnB1dC52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVyZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLnJlbW92ZVRvZG8pKFRvZG9MaXN0LCB0b2RvKTtcbiAgICAgIHJlcmVuZGVyKG1vZGUpO1xuICAgIH0pO1xuICAgIGNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi50b2dnbGVUb2RvKShUb2RvTGlzdCwgdG9kbyk7XG4gICAgICByZXJlbmRlcihtb2RlKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1saXN0JykuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICB9KTtcbiAgc2F2ZVRvTG9jYWxTdG9yYWdlKCk7XG59O1xuXG52YXIgc2hvd1N0YXRpc3RpY2FsID0gZnVuY3Rpb24gc2hvd1N0YXRpc3RpY2FsKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxsJykuaW5uZXJIVE1MID0gVG9kb0xpc3QubGVuZ3RoO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVtYWluaW5nJykuaW5uZXJIVE1MID0gKDAsIF90b2RvRnVuY3Rpb24ucmVtYWluaW5nVG9kb3MpKFRvZG9MaXN0KS5sZW5ndGg7XG59O1xuXG52YXIgcmVyZW5kZXIgPSBmdW5jdGlvbiByZXJlbmRlcigpIHtcbiAgY2xlYXJUb2RvcygpO1xuICBzaG93VG9kb3MoY3VycmVudE1vZGUpO1xuICBzaG93U3RhdGlzdGljYWwoKTtcblxuICBzd2l0Y2ggKGN1cnJlbnRNb2RlKSB7XG4gICAgY2FzZSAnY29tcGxldGVkJzpcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctdW5jb21wbGV0ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3VuY29tcGxldGUnOlxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctY29tcGxldGVkJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1hbGwnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctdW5jb21wbGV0ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cbn07XG5cbnZhciBUb2RvQXBwID0gZnVuY3Rpb24gVG9kb0FwcCgpIHtcbiAgaW5pdGlhbCgpO1xuICByZXJlbmRlcigpO1xuICB2YXIgaW5wdXROZXdUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LW5ldy10b2RvJyk7XG4gIHZhciBjb21wbGV0ZUFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcGxldGUtYWxsLXRvZG8nKTtcbiAgdmFyIHNob3dBbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJyk7XG4gIHZhciBzaG93VW5jb21wbGV0ZVRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJyk7XG4gIHZhciBzaG93Q29tcGxldGVkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpO1xuICB2YXIgdW5jb21wbGV0ZUFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdW5jb21wbGV0ZS1hbGwtdG9kbycpO1xuICBpbnB1dE5ld1RvZG8uYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLmFkZFRvZG8pKFRvZG9MaXN0LCBpbnB1dE5ld1RvZG8udmFsdWUpO1xuICAgICAgaW5wdXROZXdUb2RvLnZhbHVlID0gJyc7XG4gICAgICByZXJlbmRlcigpO1xuICAgIH1cbiAgfSk7XG4gIGNvbXBsZXRlQWxsVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAoMCwgX3RvZG9GdW5jdGlvbi5jb21wbGV0ZUFsbCkoVG9kb0xpc3QpO1xuICAgIHJlcmVuZGVyKCk7XG4gIH0pO1xuICB1bmNvbXBsZXRlQWxsVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAoMCwgX3RvZG9GdW5jdGlvbi51bmNvbXBsZXRlQWxsKShUb2RvTGlzdCk7XG4gICAgcmVyZW5kZXIoKTtcbiAgfSk7XG4gIHNob3dBbGxUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGN1cnJlbnRNb2RlID0gJ2FsbCc7XG4gICAgcmVyZW5kZXIoKTtcbiAgfSk7XG4gIHNob3dVbmNvbXBsZXRlVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjdXJyZW50TW9kZSA9ICd1bmNvbXBsZXRlJztcbiAgICByZXJlbmRlcigpO1xuICB9KTtcbiAgc2hvd0NvbXBsZXRlZFRvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudE1vZGUgPSAnY29tcGxldGVkJztcbiAgICByZXJlbmRlcigpO1xuICB9KTtcbiAgcmVyZW5kZXIoKTtcbn07IC8vU3RhcnQgQXBwXG5cblxuVG9kb0FwcCgpO1xuXG59LHtcIi4vdG9kby1mdW5jdGlvblwiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZW1haW5pbmdUb2RvcyA9IGV4cG9ydHMudW5jb21wbGV0ZUFsbCA9IGV4cG9ydHMuY29tcGxldGVBbGwgPSBleHBvcnRzLnRvZ2dsZVRvZG8gPSBleHBvcnRzLnVwZGF0ZVRvZG8gPSBleHBvcnRzLnJlbW92ZVRvZG8gPSBleHBvcnRzLmFkZFRvZG8gPSB2b2lkIDA7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSBcIltvYmplY3QgQXJndW1lbnRzXVwiKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9XG5cbi8vQmFzaWMgRnVuY3Rpb25cbnZhciBhZGRUb2RvID0gZnVuY3Rpb24gYWRkVG9kbyh0b2Rvc0JlZm9yZUFkZCwgdGl0bGUpIHtcbiAgaWYgKHRpdGxlICE9PSAnJykge1xuICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRvZG9zQmVmb3JlQWRkKSwgW3tcbiAgICAgIGlkOiB0b2Rvc0JlZm9yZUFkZC5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuaWQgPiBiLmlkID8gYS5pZCA6IGIuaWQ7XG4gICAgICB9LCAwKSArIDEsXG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICBjb21wbGV0ZWQ6IGZhbHNlXG4gICAgfV0pO1xuICB9IGVsc2Uge1xuICAgIGFsZXJ0KFwidSBtdXN0IHR5cGUgc29tZXRoaW5nIGZpcnN0ICEhXCIpO1xuICAgIHJldHVybiB0b2Rvc0JlZm9yZUFkZDtcbiAgfVxufTtcblxuZXhwb3J0cy5hZGRUb2RvID0gYWRkVG9kbztcblxudmFyIHJlbW92ZVRvZG8gPSBmdW5jdGlvbiByZW1vdmVUb2RvKHRvZG9zQmVmb3JlUmVtb3ZlLCBfcmVmKSB7XG4gIHZhciBpZCA9IF9yZWYuaWQ7XG4gIHJldHVybiB0b2Rvc0JlZm9yZVJlbW92ZS5maWx0ZXIoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5pZCAhPT0gaWQ7XG4gIH0pO1xufTtcblxuZXhwb3J0cy5yZW1vdmVUb2RvID0gcmVtb3ZlVG9kbztcblxudmFyIHVwZGF0ZVRvZG8gPSBmdW5jdGlvbiB1cGRhdGVUb2RvKHRvZG9zQmVmb3JlVXBkYXRlLCBfcmVmMikge1xuICB2YXIgaWQgPSBfcmVmMi5pZCxcbiAgICAgIHRpdGxlID0gX3JlZjIudGl0bGU7XG5cbiAgdmFyIHRlbXAgPSBfdG9Db25zdW1hYmxlQXJyYXkodG9kb3NCZWZvcmVVcGRhdGUpO1xuXG4gIHRlbXBbdGVtcC5maW5kSW5kZXgoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5pZCA9PT0gaWQ7XG4gIH0pXS50aXRsZSA9IHRpdGxlO1xuICByZXR1cm4gdGVtcDtcbn07XG5cbmV4cG9ydHMudXBkYXRlVG9kbyA9IHVwZGF0ZVRvZG87XG5cbnZhciB0b2dnbGVUb2RvID0gZnVuY3Rpb24gdG9nZ2xlVG9kbyh0b2Rvc0JlZm9yZVVwZGF0ZSwgX3JlZjMpIHtcbiAgdmFyIGlkID0gX3JlZjMuaWQ7XG5cbiAgdmFyIHRlbXAgPSBfdG9Db25zdW1hYmxlQXJyYXkodG9kb3NCZWZvcmVVcGRhdGUpO1xuXG4gIHZhciBpID0gdGVtcC5maW5kSW5kZXgoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5pZCA9PT0gaWQ7XG4gIH0pO1xuICB0ZW1wW2ldLmNvbXBsZXRlZCA9ICF0ZW1wW2ldLmNvbXBsZXRlZDtcbiAgcmV0dXJuIHRlbXA7XG59O1xuXG5leHBvcnRzLnRvZ2dsZVRvZG8gPSB0b2dnbGVUb2RvO1xuXG52YXIgY29tcGxldGVBbGwgPSBmdW5jdGlvbiBjb21wbGV0ZUFsbCh0b2Rvcykge1xuICByZXR1cm4gdG9kb3MubWFwKGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmNvbXBsZXRlQWxsID0gY29tcGxldGVBbGw7XG5cbnZhciB1bmNvbXBsZXRlQWxsID0gZnVuY3Rpb24gdW5jb21wbGV0ZUFsbCh0b2Rvcykge1xuICByZXR1cm4gdG9kb3MubWFwKGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uY29tcGxldGVkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuZXhwb3J0cy51bmNvbXBsZXRlQWxsID0gdW5jb21wbGV0ZUFsbDtcblxudmFyIHJlbWFpbmluZ1RvZG9zID0gZnVuY3Rpb24gcmVtYWluaW5nVG9kb3ModG9kb3MpIHtcbiAgcmV0dXJuIHRvZG9zLmZpbHRlcihmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmNvbXBsZXRlZCA9PT0gZmFsc2U7XG4gIH0pO1xufTtcblxuZXhwb3J0cy5yZW1haW5pbmdUb2RvcyA9IHJlbWFpbmluZ1RvZG9zO1xuXG59LHt9XX0se30sWzFdKTtcbiJdfQ==
