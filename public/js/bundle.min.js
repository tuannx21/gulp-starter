!function c(i,l,d){function u(t,e){if(!l[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(a)return a(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};i[t][0].call(r.exports,function(e){return u(i[t][1][e]||e)},r,r.exports,c,i,l,d)}return l[t].exports}for(var a="function"==typeof require&&require,e=0;e<d.length;e++)u(d[e]);return u}({1:[function(e,t,o){"use strict";var l,d=e("./todo-function"),i="all",u=!0,n=function(i){l.map(function(e){var t=document.querySelector("#todo-template").content.cloneNode(!0),o=t.querySelector("li"),n=o.querySelector("#input-todo"),r=o.querySelector("#remove-todo"),c=o.querySelector("#complete-todo");switch(n.value=e.title,i){case"uncomplete":o.style.display=!0===e.completed?"none":"block";break;case"completed":o.style.display=!0===e.completed?"block":"none";break;default:o.style.display="block"}!0===e.completed?(n.style.textDecoration="line-through",n.style.opacity=".3",c.style.opacity="1"):(n.style.textDecoration="none",n.style.opacity="1",c.style.opacity=".3"),o.addEventListener("mouseover",function(){r.classList.add("active"),c.classList.add("active")}),o.addEventListener("mouseout",function(){r.classList.remove("active"),c.classList.remove("active")}),n.addEventListener("dblclick",function(){this.readOnly=!1}),n.addEventListener("blur",function(){n.readOnly=!0,l=""!==n.value?(0,d.updateTodo)(l,{id:e.id,title:n.value}):(0,d.removeTodo)(l,e),a(i)}),n.addEventListener("keypress",function(){13!==event.which&&13!==event.keyCode||(l=(0,d.updateTodo)(l,{id:e.id,title:n.value}),a())}),r.addEventListener("click",function(){l=(0,d.removeTodo)(l,e),a(i)}),c.addEventListener("click",function(){l=(0,d.toggleTodo)(l,e),a(i)}),document.querySelector("#todo-list").appendChild(t)}),window.localStorage.setItem("todos",JSON.stringify(l))},a=function(){switch(function(){for(var e=document.querySelector("#todo-list");e.firstChild;)e.removeChild(e.firstChild)}(),n(i),document.querySelector("#all").innerHTML=l.length,document.querySelector("#remaining").innerHTML=(0,d.remainingTodos)(l).length,i){case"completed":document.querySelector("#show-completed").classList.add("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.remove("active");break;case"uncomplete":document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.add("active"),document.querySelector("#show-all").classList.remove("active");break;default:document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.add("active")}};!function(){var e;e=JSON.parse(window.localStorage.getItem("todos")),l=null===e?[]:e,a();var t=document.querySelector("#input-new-todo"),o=document.querySelector("#complete-all-todo"),n=document.querySelector("#show-all"),r=document.querySelector("#show-uncomplete"),c=document.querySelector("#show-completed");t.addEventListener("keypress",function(e){13!==e.which&&13!==e.keyCode||(l=(0,d.addTodo)(l,t.value),t.value="",u=!0,a())}),o.addEventListener("click",function(){!0===u?(0,d.completeAll)(l):(0,d.uncompleteAll)(l),u=!u,a()}),n.addEventListener("click",function(){i="all",a()}),r.addEventListener("click",function(){i="uncomplete",a()}),c.addEventListener("click",function(){i="completed",a()}),a()}()},{"./todo-function":2}],2:[function(e,t,o){"use strict";function c(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(o,"__esModule",{value:!0}),o.remainingTodos=o.uncompleteAll=o.completeAll=o.toggleTodo=o.updateTodo=o.removeTodo=o.addTodo=void 0;o.addTodo=function(e,t){return""!==t?[].concat(c(e),[{id:e.reduce(function(e,t){return e.id>t.id?e.id:t.id},0)+1,title:t,completed:!1}]):(alert("u must type something first !!"),e)};o.removeTodo=function(e,t){var o=t.id;return e.filter(function(e){return e.id!==o})};o.updateTodo=function(e,t){var o=t.id,n=t.title,r=c(e);return r[r.findIndex(function(e){return e.id===o})].title=n,r};o.toggleTodo=function(e,t){var o=t.id,n=c(e),r=n.findIndex(function(e){return e.id===o});return n[r].completed=!n[r].completed,n};o.completeAll=function(e){return e.map(function(e){return e.completed=!0})};o.uncompleteAll=function(e){return e.map(function(e){return e.completed=!1})};o.remainingTodos=function(e){return e.filter(function(e){return!1===e.completed})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5taW4uanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiVG9kb0xpc3QiLCJfdG9kb0Z1bmN0aW9uIiwiY3VycmVudE1vZGUiLCJjb21wbGV0ZUFsbFN0YXRlIiwic2hvd1RvZG9zIiwibW9kZSIsIm1hcCIsInRvZG8iLCJjbG9uZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2RvSXRlbSIsImlucHV0IiwicmVtb3ZlIiwiY29tcGxldGUiLCJ2YWx1ZSIsInRpdGxlIiwic3R5bGUiLCJkaXNwbGF5IiwiY29tcGxldGVkIiwidGV4dERlY29yYXRpb24iLCJvcGFjaXR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInRoaXMiLCJyZWFkT25seSIsInVwZGF0ZVRvZG8iLCJpZCIsInJlbW92ZVRvZG8iLCJyZXJlbmRlciIsImV2ZW50Iiwid2hpY2giLCJrZXlDb2RlIiwidG9nZ2xlVG9kbyIsImFwcGVuZENoaWxkIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b2RvTGlzdCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNsZWFyVG9kb3MiLCJpbm5lckhUTUwiLCJyZW1haW5pbmdUb2RvcyIsIlRvZG9MaXN0RnJvbUxvY2FsU3RvcmFnZSIsInBhcnNlIiwiZ2V0SXRlbSIsImlucHV0TmV3VG9kbyIsImNvbXBsZXRlQWxsVG9kbyIsInNob3dBbGxUb2RvIiwic2hvd1VuY29tcGxldGVUb2RvIiwic2hvd0NvbXBsZXRlZFRvZG8iLCJhZGRUb2RvIiwiY29tcGxldGVBbGwiLCJ1bmNvbXBsZXRlQWxsIiwiVG9kb0FwcCIsIi4vdG9kby1mdW5jdGlvbiIsIjIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnIyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJmcm9tIiwiX2l0ZXJhYmxlVG9BcnJheSIsIlR5cGVFcnJvciIsIl9ub25JdGVyYWJsZVNwcmVhZCIsImRlZmluZVByb3BlcnR5IiwidG9kb3NCZWZvcmVBZGQiLCJjb25jYXQiLCJyZWR1Y2UiLCJiIiwiYWxlcnQiLCJ0b2Rvc0JlZm9yZVJlbW92ZSIsIl9yZWYiLCJmaWx0ZXIiLCJ0b2Rvc0JlZm9yZVVwZGF0ZSIsIl9yZWYyIiwidGVtcCIsImZpbmRJbmRleCIsIl9yZWYzIiwidG9kb3MiXSwibWFwcGluZ3MiOiJDQUFZLFNBQVNBLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsU0FBU0MsRUFBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLElBQUlFLEVBQUUsbUJBQW1CQyxTQUFTQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLElBQUlLLEVBQUUsSUFBSUMsTUFBTSx1QkFBdUJOLEVBQUUsS0FBSyxNQUFNSyxFQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxJQUFJRyxFQUFFWCxFQUFFRyxHQUFHLENBQUNTLFFBQVEsSUFBSWIsRUFBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQW9CLE9BQU9JLEVBQWxCSCxFQUFFSSxHQUFHLEdBQUdMLElBQWVBLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsT0FBT0QsRUFBRUcsR0FBR1MsUUFBUSxJQUFJLElBQUlMLEVBQUUsbUJBQW1CRCxTQUFTQSxRQUFRSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9B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QSxFQUFLdUIsS0FBT0EsS0FrQnZCbkMsRUFBUWtDLFdBWlMsU0FBb0IyRCxFQUFtQkMsR0FDdEQsSUFBSTNELEVBQUsyRCxFQUFNM0QsR0FDWFosRUFBUXVFLEVBQU12RSxNQUVkd0UsRUFBTzNCLEVBQW1CeUIsR0FLOUIsT0FIQUUsRUFBS0EsRUFBS0MsVUFBVSxTQUFVcEYsR0FDNUIsT0FBT0EsRUFBS3VCLEtBQU9BLEtBQ2pCWixNQUFRQSxFQUNMd0UsR0FpQlQvRixFQUFReUMsV0FaUyxTQUFvQm9ELEVBQW1CSSxHQUN0RCxJQUFJOUQsRUFBSzhELEVBQU05RCxHQUVYNEQsRUFBTzNCLEVBQW1CeUIsR0FFMUJ0RyxFQUFJd0csRUFBS0MsVUFBVSxTQUFVcEYsR0FDL0IsT0FBT0EsRUFBS3VCLEtBQU9BLElBR3JCLE9BREE0RCxFQUFLeEcsR0FBR21DLFdBQWFxRSxFQUFLeEcsR0FBR21DLFVBQ3RCcUUsR0FXVC9GLEVBQVErRCxZQU5VLFNBQXFCbUMsR0FDckMsT0FBT0EsRUFBTXZGLElBQUksU0FBVUMsR0FDekIsT0FBT0EsRUFBS2MsV0FBWSxLQVk1QjFCLEVBQVFnRSxjQU5ZLFNBQXVCa0MsR0FDekMsT0FBT0EsRUFBTXZGLElBQUksU0FBVUMsR0FDekIsT0FBT0EsRUFBS2MsV0FBWSxLQVk1QjFCLEVBQVFxRCxlQU5hLFNBQXdCNkMsR0FDM0MsT0FBT0EsRUFBTU4sT0FBTyxTQUFVaEYsR0FDNUIsT0FBMEIsSUFBbkJBLEVBQUtjLGNBTWQsS0FBSyxHQUFHLENBQUMiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdG9kb0Z1bmN0aW9uID0gcmVxdWlyZShcIi4vdG9kby1mdW5jdGlvblwiKTtcblxudmFyIFRvZG9MaXN0O1xudmFyIGN1cnJlbnRNb2RlID0gJ2FsbCc7XG52YXIgY29tcGxldGVBbGxTdGF0ZSA9IHRydWU7IC8vQXBwIFxuXG52YXIgaW5pdGlhbCA9IGZ1bmN0aW9uIGluaXRpYWwoKSB7XG4gIHZhciBUb2RvTGlzdEZyb21Mb2NhbFN0b3JhZ2UgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kb3MnKSk7XG5cbiAgaWYgKFRvZG9MaXN0RnJvbUxvY2FsU3RvcmFnZSA9PT0gbnVsbCkge1xuICAgIFRvZG9MaXN0ID0gW107XG4gIH0gZWxzZSB7XG4gICAgVG9kb0xpc3QgPSBUb2RvTGlzdEZyb21Mb2NhbFN0b3JhZ2U7XG4gIH1cbn07XG5cbnZhciBzYXZlVG9Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzYXZlVG9Mb2NhbFN0b3JhZ2UoKSB7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShUb2RvTGlzdCkpO1xufTtcblxudmFyIGNsZWFyVG9kb3MgPSBmdW5jdGlvbiBjbGVhclRvZG9zKCkge1xuICB2YXIgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1saXN0Jyk7XG5cbiAgd2hpbGUgKHRvZG9MaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICB0b2RvTGlzdC5yZW1vdmVDaGlsZCh0b2RvTGlzdC5maXJzdENoaWxkKTtcbiAgfVxufTtcblxudmFyIHNob3dUb2RvcyA9IGZ1bmN0aW9uIHNob3dUb2Rvcyhtb2RlKSB7XG4gIFRvZG9MaXN0Lm1hcChmdW5jdGlvbiAodG9kbykge1xuICAgIHZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvLXRlbXBsYXRlJyk7XG4gICAgdmFyIGNsb25lID0gdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIHRvZG9JdGVtID0gY2xvbmUucXVlcnlTZWxlY3RvcignbGknKTtcbiAgICB2YXIgaW5wdXQgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtdG9kbycpO1xuICAgIHZhciByZW1vdmUgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjcmVtb3ZlLXRvZG8nKTtcbiAgICB2YXIgY29tcGxldGUgPSB0b2RvSXRlbS5xdWVyeVNlbGVjdG9yKCcjY29tcGxldGUtdG9kbycpO1xuICAgIGlucHV0LnZhbHVlID0gdG9kby50aXRsZTtcblxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAndW5jb21wbGV0ZSc6XG4gICAgICAgIHRvZG9JdGVtLnN0eWxlLmRpc3BsYXkgPSB0b2RvLmNvbXBsZXRlZCA9PT0gdHJ1ZSA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgICB0b2RvSXRlbS5zdHlsZS5kaXNwbGF5ID0gdG9kby5jb21wbGV0ZWQgPT09IHRydWUgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdG9kb0l0ZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuXG4gICAgaWYgKHRvZG8uY29tcGxldGVkID09PSB0cnVlKSB7XG4gICAgICBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgaW5wdXQuc3R5bGUub3BhY2l0eSA9ICcuMyc7XG4gICAgICBjb21wbGV0ZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJztcbiAgICAgIGlucHV0LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICBjb21wbGV0ZS5zdHlsZS5vcGFjaXR5ID0gJy4zJztcbiAgICB9XG5cbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBjb21wbGV0ZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGNvbXBsZXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5yZWFkT25seSA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpbnB1dC5yZWFkT25seSA9IHRydWU7XG5cbiAgICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi51cGRhdGVUb2RvKShUb2RvTGlzdCwge1xuICAgICAgICAgIGlkOiB0b2RvLmlkLFxuICAgICAgICAgIHRpdGxlOiBpbnB1dC52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRvZG9MaXN0ID0gKDAsIF90b2RvRnVuY3Rpb24ucmVtb3ZlVG9kbykoVG9kb0xpc3QsIHRvZG8pO1xuICAgICAgfVxuXG4gICAgICByZXJlbmRlcihtb2RlKTtcbiAgICB9KTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi51cGRhdGVUb2RvKShUb2RvTGlzdCwge1xuICAgICAgICAgIGlkOiB0b2RvLmlkLFxuICAgICAgICAgIHRpdGxlOiBpbnB1dC52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVyZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLnJlbW92ZVRvZG8pKFRvZG9MaXN0LCB0b2RvKTtcbiAgICAgIHJlcmVuZGVyKG1vZGUpO1xuICAgIH0pO1xuICAgIGNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi50b2dnbGVUb2RvKShUb2RvTGlzdCwgdG9kbyk7XG4gICAgICByZXJlbmRlcihtb2RlKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1saXN0JykuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICB9KTtcbiAgc2F2ZVRvTG9jYWxTdG9yYWdlKCk7XG59O1xuXG52YXIgc2hvd1N0YXRpc3RpY2FsID0gZnVuY3Rpb24gc2hvd1N0YXRpc3RpY2FsKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxsJykuaW5uZXJIVE1MID0gVG9kb0xpc3QubGVuZ3RoO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVtYWluaW5nJykuaW5uZXJIVE1MID0gKDAsIF90b2RvRnVuY3Rpb24ucmVtYWluaW5nVG9kb3MpKFRvZG9MaXN0KS5sZW5ndGg7XG59O1xuXG52YXIgcmVyZW5kZXIgPSBmdW5jdGlvbiByZXJlbmRlcigpIHtcbiAgY2xlYXJUb2RvcygpO1xuICBzaG93VG9kb3MoY3VycmVudE1vZGUpO1xuICBzaG93U3RhdGlzdGljYWwoKTtcblxuICBzd2l0Y2ggKGN1cnJlbnRNb2RlKSB7XG4gICAgY2FzZSAnY29tcGxldGVkJzpcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctdW5jb21wbGV0ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3VuY29tcGxldGUnOlxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctY29tcGxldGVkJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1hbGwnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctdW5jb21wbGV0ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cbn07XG5cbnZhciBUb2RvQXBwID0gZnVuY3Rpb24gVG9kb0FwcCgpIHtcbiAgaW5pdGlhbCgpO1xuICByZXJlbmRlcigpO1xuICB2YXIgaW5wdXROZXdUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LW5ldy10b2RvJyk7XG4gIHZhciBjb21wbGV0ZUFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcGxldGUtYWxsLXRvZG8nKTtcbiAgdmFyIHNob3dBbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctYWxsJyk7XG4gIHZhciBzaG93VW5jb21wbGV0ZVRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJyk7XG4gIHZhciBzaG93Q29tcGxldGVkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWNvbXBsZXRlZCcpO1xuICBpbnB1dE5ld1RvZG8uYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLmFkZFRvZG8pKFRvZG9MaXN0LCBpbnB1dE5ld1RvZG8udmFsdWUpO1xuICAgICAgaW5wdXROZXdUb2RvLnZhbHVlID0gJyc7XG4gICAgICBjb21wbGV0ZUFsbFN0YXRlID0gdHJ1ZTtcbiAgICAgIHJlcmVuZGVyKCk7XG4gICAgfVxuICB9KTtcbiAgY29tcGxldGVBbGxUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjb21wbGV0ZUFsbFN0YXRlID09PSB0cnVlKSB7XG4gICAgICAoMCwgX3RvZG9GdW5jdGlvbi5jb21wbGV0ZUFsbCkoVG9kb0xpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX3RvZG9GdW5jdGlvbi51bmNvbXBsZXRlQWxsKShUb2RvTGlzdCk7XG4gICAgfVxuXG4gICAgY29tcGxldGVBbGxTdGF0ZSA9ICFjb21wbGV0ZUFsbFN0YXRlO1xuICAgIHJlcmVuZGVyKCk7XG4gIH0pO1xuICBzaG93QWxsVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjdXJyZW50TW9kZSA9ICdhbGwnO1xuICAgIHJlcmVuZGVyKCk7XG4gIH0pO1xuICBzaG93VW5jb21wbGV0ZVRvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudE1vZGUgPSAndW5jb21wbGV0ZSc7XG4gICAgcmVyZW5kZXIoKTtcbiAgfSk7XG4gIHNob3dDb21wbGV0ZWRUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGN1cnJlbnRNb2RlID0gJ2NvbXBsZXRlZCc7XG4gICAgcmVyZW5kZXIoKTtcbiAgfSk7XG4gIHJlcmVuZGVyKCk7XG59OyAvL1N0YXJ0IEFwcFxuXG5cblRvZG9BcHAoKTtcblxufSx7XCIuL3RvZG8tZnVuY3Rpb25cIjoyfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucmVtYWluaW5nVG9kb3MgPSBleHBvcnRzLnVuY29tcGxldGVBbGwgPSBleHBvcnRzLmNvbXBsZXRlQWxsID0gZXhwb3J0cy50b2dnbGVUb2RvID0gZXhwb3J0cy51cGRhdGVUb2RvID0gZXhwb3J0cy5yZW1vdmVUb2RvID0gZXhwb3J0cy5hZGRUb2RvID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gXCJbb2JqZWN0IEFyZ3VtZW50c11cIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfVxuXG4vL0Jhc2ljIEZ1bmN0aW9uXG52YXIgYWRkVG9kbyA9IGZ1bmN0aW9uIGFkZFRvZG8odG9kb3NCZWZvcmVBZGQsIHRpdGxlKSB7XG4gIGlmICh0aXRsZSAhPT0gJycpIHtcbiAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0b2Rvc0JlZm9yZUFkZCksIFt7XG4gICAgICBpZDogdG9kb3NCZWZvcmVBZGQucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLmlkID4gYi5pZCA/IGEuaWQgOiBiLmlkO1xuICAgICAgfSwgMCkgKyAxLFxuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgY29tcGxldGVkOiBmYWxzZVxuICAgIH1dKTtcbiAgfSBlbHNlIHtcbiAgICBhbGVydChcInUgbXVzdCB0eXBlIHNvbWV0aGluZyBmaXJzdCAhIVwiKTtcbiAgICByZXR1cm4gdG9kb3NCZWZvcmVBZGQ7XG4gIH1cbn07XG5cbmV4cG9ydHMuYWRkVG9kbyA9IGFkZFRvZG87XG5cbnZhciByZW1vdmVUb2RvID0gZnVuY3Rpb24gcmVtb3ZlVG9kbyh0b2Rvc0JlZm9yZVJlbW92ZSwgX3JlZikge1xuICB2YXIgaWQgPSBfcmVmLmlkO1xuICByZXR1cm4gdG9kb3NCZWZvcmVSZW1vdmUuZmlsdGVyKGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uaWQgIT09IGlkO1xuICB9KTtcbn07XG5cbmV4cG9ydHMucmVtb3ZlVG9kbyA9IHJlbW92ZVRvZG87XG5cbnZhciB1cGRhdGVUb2RvID0gZnVuY3Rpb24gdXBkYXRlVG9kbyh0b2Rvc0JlZm9yZVVwZGF0ZSwgX3JlZjIpIHtcbiAgdmFyIGlkID0gX3JlZjIuaWQsXG4gICAgICB0aXRsZSA9IF9yZWYyLnRpdGxlO1xuXG4gIHZhciB0ZW1wID0gX3RvQ29uc3VtYWJsZUFycmF5KHRvZG9zQmVmb3JlVXBkYXRlKTtcblxuICB0ZW1wW3RlbXAuZmluZEluZGV4KGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uaWQgPT09IGlkO1xuICB9KV0udGl0bGUgPSB0aXRsZTtcbiAgcmV0dXJuIHRlbXA7XG59O1xuXG5leHBvcnRzLnVwZGF0ZVRvZG8gPSB1cGRhdGVUb2RvO1xuXG52YXIgdG9nZ2xlVG9kbyA9IGZ1bmN0aW9uIHRvZ2dsZVRvZG8odG9kb3NCZWZvcmVVcGRhdGUsIF9yZWYzKSB7XG4gIHZhciBpZCA9IF9yZWYzLmlkO1xuXG4gIHZhciB0ZW1wID0gX3RvQ29uc3VtYWJsZUFycmF5KHRvZG9zQmVmb3JlVXBkYXRlKTtcblxuICB2YXIgaSA9IHRlbXAuZmluZEluZGV4KGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uaWQgPT09IGlkO1xuICB9KTtcbiAgdGVtcFtpXS5jb21wbGV0ZWQgPSAhdGVtcFtpXS5jb21wbGV0ZWQ7XG4gIHJldHVybiB0ZW1wO1xufTtcblxuZXhwb3J0cy50b2dnbGVUb2RvID0gdG9nZ2xlVG9kbztcblxudmFyIGNvbXBsZXRlQWxsID0gZnVuY3Rpb24gY29tcGxldGVBbGwodG9kb3MpIHtcbiAgcmV0dXJuIHRvZG9zLm1hcChmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmNvbXBsZXRlZCA9IHRydWU7XG4gIH0pO1xufTtcblxuZXhwb3J0cy5jb21wbGV0ZUFsbCA9IGNvbXBsZXRlQWxsO1xuXG52YXIgdW5jb21wbGV0ZUFsbCA9IGZ1bmN0aW9uIHVuY29tcGxldGVBbGwodG9kb3MpIHtcbiAgcmV0dXJuIHRvZG9zLm1hcChmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmNvbXBsZXRlZCA9IGZhbHNlO1xuICB9KTtcbn07XG5cbmV4cG9ydHMudW5jb21wbGV0ZUFsbCA9IHVuY29tcGxldGVBbGw7XG5cbnZhciByZW1haW5pbmdUb2RvcyA9IGZ1bmN0aW9uIHJlbWFpbmluZ1RvZG9zKHRvZG9zKSB7XG4gIHJldHVybiB0b2Rvcy5maWx0ZXIoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5jb21wbGV0ZWQgPT09IGZhbHNlO1xuICB9KTtcbn07XG5cbmV4cG9ydHMucmVtYWluaW5nVG9kb3MgPSByZW1haW5pbmdUb2RvcztcblxufSx7fV19LHt9LFsxXSk7XG4iXX0=
