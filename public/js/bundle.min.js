!function c(i,l,d){function u(t,e){if(!l[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(a)return a(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=l[t]={exports:{}};i[t][0].call(r.exports,function(e){return u(i[t][1][e]||e)},r,r.exports,c,i,l,d)}return l[t].exports}for(var a="function"==typeof require&&require,e=0;e<d.length;e++)u(d[e]);return u}({1:[function(e,t,o){"use strict";var l,d=e("./todo-function"),i="all",u=!0,n=function(i){l.map(function(e){var t=document.querySelector("#todo-template").content.cloneNode(!0),o=t.querySelector("li");switch(i){case"uncomplete":o.style.display=!0===e.completed?"none":"block";break;case"completed":o.style.display=!0===e.completed?"block":"none";break;default:o.style.display="block"}o.id="todo".concat(e.id);var n=o.querySelector("#input-todo"),r=o.querySelector("#remove-todo"),c=o.querySelector("#complete-todo");n.value=e.title,!0===e.completed?(n.style.textDecoration="line-through",n.style.opacity=".3",c.style.opacity="1"):(n.style.textDecoration="none",n.style.opacity="1",c.style.opacity=".3"),o.addEventListener("mouseover",function(){r.classList.add("active"),c.classList.add("active")}),o.addEventListener("mouseout",function(){r.classList.remove("active"),c.classList.remove("active")}),n.addEventListener("dblclick",function(){this.readOnly=!1}),n.addEventListener("blur",function(){n.readOnly=!0,l=""!==n.value?(0,d.updateTodo)(l,{id:e.id,title:n.value}):(0,d.removeTodo)(l,e),a(i)}),n.addEventListener("keypress",function(){13!==event.which&&13!==event.keyCode||(l=(0,d.updateTodo)(l,{id:e.id,title:n.value}),a())}),r.addEventListener("click",function(){l=(0,d.removeTodo)(l,e),a(i)}),c.addEventListener("click",function(){l=(0,d.toggleTodo)(l,e),a(i)}),document.querySelector("#todo-list").appendChild(t)}),window.localStorage.setItem("todos",JSON.stringify(l))},a=function(){switch(function(){for(var e=document.querySelector("#todo-list");e.firstChild;)e.removeChild(e.firstChild)}(),n(i),document.querySelector("#all").innerHTML=l.length,document.querySelector("#remaining").innerHTML=(0,d.remainingTodos)(l).length,i){case"completed":document.querySelector("#show-completed").classList.add("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.remove("active");break;case"uncomplete":document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.add("active"),document.querySelector("#show-all").classList.remove("active");break;default:document.querySelector("#show-completed").classList.remove("active"),document.querySelector("#show-uncomplete").classList.remove("active"),document.querySelector("#show-all").classList.add("active")}};!function(){var e;e=JSON.parse(window.localStorage.getItem("todos")),l=null===e?[]:e,a();var t=document.querySelector("#input-new-todo"),o=document.querySelector("#complete-all-todo"),n=document.querySelector("#show-all"),r=document.querySelector("#show-uncomplete"),c=document.querySelector("#show-completed");t.addEventListener("keypress",function(e){13!==e.which&&13!==e.keyCode||(l=(0,d.addTodo)(l,t.value),t.value="",a())}),o.addEventListener("click",function(){this.style.opacity=!0===u?((0,d.completeAll)(l),".3"):((0,d.uncompleteAll)(l),"1"),u=!u,a()}),n.addEventListener("click",function(){i="all",a()}),r.addEventListener("click",function(){i="uncomplete",a()}),c.addEventListener("click",function(){i="completed",a()}),a()}()},{"./todo-function":2}],2:[function(e,t,o){"use strict";function c(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(o,"__esModule",{value:!0}),o.remainingTodos=o.uncompleteAll=o.completeAll=o.toggleTodo=o.updateTodo=o.removeTodo=o.addTodo=void 0;o.addTodo=function(e,t){return""!==t?[].concat(c(e),[{id:e.reduce(function(e,t){return e.id>t.id?e.id:t.id},0)+1,title:t,completed:!1}]):(alert("u must type something first !!"),e)};o.removeTodo=function(e,t){var o=t.id;return e.filter(function(e){return e.id!==o})};o.updateTodo=function(e,t){var o=t.id,n=t.title,r=c(e);return r[r.findIndex(function(e){return e.id===o})].title=n,r};o.toggleTodo=function(e,t){var o=t.id,n=c(e),r=n.findIndex(function(e){return e.id===o});return n[r].completed=!n[r].completed,n};o.completeAll=function(e){return e.map(function(e){return e.completed=!0})};o.uncompleteAll=function(e){return e.map(function(e){return e.completed=!1})};o.remainingTodos=function(e){return e.filter(function(e){return!1===e.completed})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5taW4uanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiVG9kb0xpc3QiLCJfdG9kb0Z1bmN0aW9uIiwiY3VycmVudE1vZGUiLCJjb21wbGV0ZUFsbFN0YXRlIiwic2hvd1RvZG9zIiwibW9kZSIsIm1hcCIsInRvZG8iLCJjbG9uZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2RvSXRlbSIsInN0eWxlIiwiZGlzcGxheSIsImNvbXBsZXRlZCIsImlkIiwiY29uY2F0IiwiaW5wdXQiLCJyZW1vdmUiLCJjb21wbGV0ZSIsInZhbHVlIiwidGl0bGUiLCJ0ZXh0RGVjb3JhdGlvbiIsIm9wYWNpdHkiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwidGhpcyIsInJlYWRPbmx5IiwidXBkYXRlVG9kbyIsInJlbW92ZVRvZG8iLCJyZXJlbmRlciIsImV2ZW50Iiwid2hpY2giLCJrZXlDb2RlIiwidG9nZ2xlVG9kbyIsImFwcGVuZENoaWxkIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b2RvTGlzdCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNsZWFyVG9kb3MiLCJpbm5lckhUTUwiLCJyZW1haW5pbmdUb2RvcyIsIlRvZG9MaXN0RnJvbUxvY2FsU3RvcmFnZSIsInBhcnNlIiwiZ2V0SXRlbSIsImlucHV0TmV3VG9kbyIsImNvbXBsZXRlQWxsVG9kbyIsInNob3dBbGxUb2RvIiwic2hvd1VuY29tcGxldGVUb2RvIiwic2hvd0NvbXBsZXRlZFRvZG8iLCJhZGRUb2RvIiwiY29tcGxldGVBbGwiLCJ1bmNvbXBsZXRlQWxsIiwiVG9kb0FwcCIsIi4vdG9kby1mdW5jdGlvbiIsIjIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnIyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJmcm9tIiwiX2l0ZXJhYmxlVG9BcnJheSIsIlR5cGVFcnJvciIsIl9ub25JdGVyYWJsZVNwcmVhZCIsImRlZmluZVByb3BlcnR5IiwidG9kb3NCZWZvcmVBZGQiLCJyZWR1Y2UiLCJiIiwiYWxlcnQiLCJ0b2Rvc0JlZm9yZVJlbW92ZSIsIl9yZWYiLCJmaWx0ZXIiLCJ0b2Rvc0JlZm9yZVVwZGF0ZSIsIl9yZWYyIiwidGVtcCIsImZpbmRJbmRleCIsIl9yZWYzIiwidG9kb3MiXSwibWFwcGluZ3MiOiJDQUFZLFNBQVNBLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsU0FBU0MsRUFBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLElBQUlFLEVBQUUsbUJBQW1CQyxTQUFTQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLElBQUlLLEVBQUUsSUFBSUMsTUFBTSx1QkFBdUJOLEVBQUUsS0FBSyxNQUFNSyxFQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxJQUFJRyxFQUFFWCxFQUFFRyxHQUFHLENBQUNTLFFBQVEsSUFBSWIsRUFBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQW9CLE9BQU9JLEVBQWxCSCxFQUFFSSxHQUFHLEdBQUdMLElBQWVBLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsT0FBT0QsRUFBRUcsR0FBR1MsUUFBUSxJQUFJLElBQUlMLEVBQUUsbUJBQW1CRCxTQUFTQSxRQUFRSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9B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RCxJQUFJckUsRUFBS3FFLEVBQUtyRSxHQUNkLE9BQU9vRSxFQUFrQkUsT0FBTyxTQUFVaEYsR0FDeEMsT0FBT0EsRUFBS1UsS0FBT0EsS0FrQnZCdEIsRUFBUW9DLFdBWlMsU0FBb0J5RCxFQUFtQkMsR0FDdEQsSUFBSXhFLEVBQUt3RSxFQUFNeEUsR0FDWE0sRUFBUWtFLEVBQU1sRSxNQUVkbUUsRUFBTzFCLEVBQW1Cd0IsR0FLOUIsT0FIQUUsRUFBS0EsRUFBS0MsVUFBVSxTQUFVcEYsR0FDNUIsT0FBT0EsRUFBS1UsS0FBT0EsS0FDakJNLE1BQVFBLEVBQ0xtRSxHQWlCVC9GLEVBQVEwQyxXQVpTLFNBQW9CbUQsRUFBbUJJLEdBQ3RELElBQUkzRSxFQUFLMkUsRUFBTTNFLEdBRVh5RSxFQUFPMUIsRUFBbUJ3QixHQUUxQnRHLEVBQUl3RyxFQUFLQyxVQUFVLFNBQVVwRixHQUMvQixPQUFPQSxFQUFLVSxLQUFPQSxJQUdyQixPQURBeUUsRUFBS3hHLEdBQUc4QixXQUFhMEUsRUFBS3hHLEdBQUc4QixVQUN0QjBFLEdBV1QvRixFQUFRZ0UsWUFOVSxTQUFxQmtDLEdBQ3JDLE9BQU9BLEVBQU12RixJQUFJLFNBQVVDLEdBQ3pCLE9BQU9BLEVBQUtTLFdBQVksS0FZNUJyQixFQUFRaUUsY0FOWSxTQUF1QmlDLEdBQ3pDLE9BQU9BLEVBQU12RixJQUFJLFNBQVVDLEdBQ3pCLE9BQU9BLEVBQUtTLFdBQVksS0FZNUJyQixFQUFRc0QsZUFOYSxTQUF3QjRDLEdBQzNDLE9BQU9BLEVBQU1OLE9BQU8sU0FBVWhGLEdBQzVCLE9BQTBCLElBQW5CQSxFQUFLUyxjQU1kLEtBQUssR0FBRyxDQUFDIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgX3RvZG9GdW5jdGlvbiA9IHJlcXVpcmUoXCIuL3RvZG8tZnVuY3Rpb25cIik7XG5cbnZhciBUb2RvTGlzdDtcbnZhciBjdXJyZW50TW9kZSA9ICdhbGwnO1xudmFyIGNvbXBsZXRlQWxsU3RhdGUgPSB0cnVlOyAvL0FwcCBcblxudmFyIGluaXRpYWwgPSBmdW5jdGlvbiBpbml0aWFsKCkge1xuICB2YXIgVG9kb0xpc3RGcm9tTG9jYWxTdG9yYWdlID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9zJykpO1xuXG4gIGlmIChUb2RvTGlzdEZyb21Mb2NhbFN0b3JhZ2UgPT09IG51bGwpIHtcbiAgICBUb2RvTGlzdCA9IFtdO1xuICB9IGVsc2Uge1xuICAgIFRvZG9MaXN0ID0gVG9kb0xpc3RGcm9tTG9jYWxTdG9yYWdlO1xuICB9XG59O1xuXG52YXIgc2F2ZVRvTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKCkge1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkoVG9kb0xpc3QpKTtcbn07XG5cbnZhciBjbGVhclRvZG9zID0gZnVuY3Rpb24gY2xlYXJUb2RvcygpIHtcbiAgdmFyIHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tbGlzdCcpO1xuXG4gIHdoaWxlICh0b2RvTGlzdC5maXJzdENoaWxkKSB7XG4gICAgdG9kb0xpc3QucmVtb3ZlQ2hpbGQodG9kb0xpc3QuZmlyc3RDaGlsZCk7XG4gIH1cbn07XG5cbnZhciBzaG93VG9kb3MgPSBmdW5jdGlvbiBzaG93VG9kb3MobW9kZSkge1xuICBUb2RvTGlzdC5tYXAoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby10ZW1wbGF0ZScpO1xuICAgIHZhciBjbG9uZSA9IHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciB0b2RvSXRlbSA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ2xpJyk7XG5cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ3VuY29tcGxldGUnOlxuICAgICAgICB0b2RvSXRlbS5zdHlsZS5kaXNwbGF5ID0gdG9kby5jb21wbGV0ZWQgPT09IHRydWUgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tcGxldGVkJzpcbiAgICAgICAgdG9kb0l0ZW0uc3R5bGUuZGlzcGxheSA9IHRvZG8uY29tcGxldGVkID09PSB0cnVlID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRvZG9JdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cblxuICAgIHRvZG9JdGVtLmlkID0gXCJ0b2RvXCIuY29uY2F0KHRvZG8uaWQpO1xuICAgIHZhciBpbnB1dCA9IHRvZG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC10b2RvJyk7XG4gICAgdmFyIHJlbW92ZSA9IHRvZG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJyNyZW1vdmUtdG9kbycpO1xuICAgIHZhciBjb21wbGV0ZSA9IHRvZG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJyNjb21wbGV0ZS10b2RvJyk7XG4gICAgaW5wdXQudmFsdWUgPSB0b2RvLnRpdGxlOyAvLyBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IHRvZG8uY29tcGxldGVkID09PSB0cnVlID8gJ2xpbmUtdGhyb3VnaCcgOiAnbm9uZSdcbiAgICAvLyBpbnB1dC5zdHlsZS5vcGFjaXR5ID0gdG9kby5jb21wbGV0ZWQgPT09IHRydWUgPyAnLjMnIDogJzEnXG5cbiAgICBpZiAodG9kby5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgIGlucHV0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICBpbnB1dC5zdHlsZS5vcGFjaXR5ID0gJy4zJztcbiAgICAgIGNvbXBsZXRlLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xuICAgICAgaW5wdXQuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgIGNvbXBsZXRlLnN0eWxlLm9wYWNpdHkgPSAnLjMnO1xuICAgIH1cblxuICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGNvbXBsZXRlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgY29tcGxldGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlucHV0LnJlYWRPbmx5ID0gdHJ1ZTtcblxuICAgICAgaWYgKGlucHV0LnZhbHVlICE9PSAnJykge1xuICAgICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLnVwZGF0ZVRvZG8pKFRvZG9MaXN0LCB7XG4gICAgICAgICAgaWQ6IHRvZG8uaWQsXG4gICAgICAgICAgdGl0bGU6IGlucHV0LnZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVG9kb0xpc3QgPSAoMCwgX3RvZG9GdW5jdGlvbi5yZW1vdmVUb2RvKShUb2RvTGlzdCwgdG9kbyk7XG4gICAgICB9XG5cbiAgICAgIHJlcmVuZGVyKG1vZGUpO1xuICAgIH0pO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMyB8fCBldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLnVwZGF0ZVRvZG8pKFRvZG9MaXN0LCB7XG4gICAgICAgICAgaWQ6IHRvZG8uaWQsXG4gICAgICAgICAgdGl0bGU6IGlucHV0LnZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlbW92ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIFRvZG9MaXN0ID0gKDAsIF90b2RvRnVuY3Rpb24ucmVtb3ZlVG9kbykoVG9kb0xpc3QsIHRvZG8pO1xuICAgICAgcmVyZW5kZXIobW9kZSk7XG4gICAgfSk7XG4gICAgY29tcGxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBUb2RvTGlzdCA9ICgwLCBfdG9kb0Z1bmN0aW9uLnRvZ2dsZVRvZG8pKFRvZG9MaXN0LCB0b2RvKTtcbiAgICAgIHJlcmVuZGVyKG1vZGUpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvLWxpc3QnKS5hcHBlbmRDaGlsZChjbG9uZSk7XG4gIH0pO1xuICBzYXZlVG9Mb2NhbFN0b3JhZ2UoKTtcbn07XG5cbnZhciBzaG93U3RhdGlzdGljYWwgPSBmdW5jdGlvbiBzaG93U3RhdGlzdGljYWwoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGwnKS5pbm5lckhUTUwgPSBUb2RvTGlzdC5sZW5ndGg7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1haW5pbmcnKS5pbm5lckhUTUwgPSAoMCwgX3RvZG9GdW5jdGlvbi5yZW1haW5pbmdUb2RvcykoVG9kb0xpc3QpLmxlbmd0aDtcbn07XG5cbnZhciByZXJlbmRlciA9IGZ1bmN0aW9uIHJlcmVuZGVyKCkge1xuICBjbGVhclRvZG9zKCk7XG4gIHNob3dUb2RvcyhjdXJyZW50TW9kZSk7XG4gIHNob3dTdGF0aXN0aWNhbCgpO1xuXG4gIHN3aXRjaCAoY3VycmVudE1vZGUpIHtcbiAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctY29tcGxldGVkJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1hbGwnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAndW5jb21wbGV0ZSc6XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1jb21wbGV0ZWQnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LXVuY29tcGxldGUnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LWFsbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctY29tcGxldGVkJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy11bmNvbXBsZXRlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1hbGwnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxufTtcblxudmFyIFRvZG9BcHAgPSBmdW5jdGlvbiBUb2RvQXBwKCkge1xuICBpbml0aWFsKCk7XG4gIHJlcmVuZGVyKCk7XG4gIHZhciBpbnB1dE5ld1RvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtbmV3LXRvZG8nKTtcbiAgdmFyIGNvbXBsZXRlQWxsVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb21wbGV0ZS1hbGwtdG9kbycpO1xuICB2YXIgc2hvd0FsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvdy1hbGwnKTtcbiAgdmFyIHNob3dVbmNvbXBsZXRlVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG93LXVuY29tcGxldGUnKTtcbiAgdmFyIHNob3dDb21wbGV0ZWRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3ctY29tcGxldGVkJyk7XG4gIGlucHV0TmV3VG9kby5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC53aGljaCA9PT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIFRvZG9MaXN0ID0gKDAsIF90b2RvRnVuY3Rpb24uYWRkVG9kbykoVG9kb0xpc3QsIGlucHV0TmV3VG9kby52YWx1ZSk7XG4gICAgICBpbnB1dE5ld1RvZG8udmFsdWUgPSAnJztcbiAgICAgIHJlcmVuZGVyKCk7XG4gICAgfVxuICB9KTtcbiAgY29tcGxldGVBbGxUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjb21wbGV0ZUFsbFN0YXRlID09PSB0cnVlKSB7XG4gICAgICAoMCwgX3RvZG9GdW5jdGlvbi5jb21wbGV0ZUFsbCkoVG9kb0xpc3QpO1xuICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gJy4zJztcbiAgICB9IGVsc2Uge1xuICAgICAgKDAsIF90b2RvRnVuY3Rpb24udW5jb21wbGV0ZUFsbCkoVG9kb0xpc3QpO1xuICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cblxuICAgIGNvbXBsZXRlQWxsU3RhdGUgPSAhY29tcGxldGVBbGxTdGF0ZTtcbiAgICByZXJlbmRlcigpO1xuICB9KTtcbiAgc2hvd0FsbFRvZG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudE1vZGUgPSAnYWxsJztcbiAgICByZXJlbmRlcigpO1xuICB9KTtcbiAgc2hvd1VuY29tcGxldGVUb2RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGN1cnJlbnRNb2RlID0gJ3VuY29tcGxldGUnO1xuICAgIHJlcmVuZGVyKCk7XG4gIH0pO1xuICBzaG93Q29tcGxldGVkVG9kby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjdXJyZW50TW9kZSA9ICdjb21wbGV0ZWQnO1xuICAgIHJlcmVuZGVyKCk7XG4gIH0pO1xuICByZXJlbmRlcigpO1xufTsgLy9TdGFydCBBcHBcblxuXG5Ub2RvQXBwKCk7XG5cbn0se1wiLi90b2RvLWZ1bmN0aW9uXCI6Mn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnJlbWFpbmluZ1RvZG9zID0gZXhwb3J0cy51bmNvbXBsZXRlQWxsID0gZXhwb3J0cy5jb21wbGV0ZUFsbCA9IGV4cG9ydHMudG9nZ2xlVG9kbyA9IGV4cG9ydHMudXBkYXRlVG9kbyA9IGV4cG9ydHMucmVtb3ZlVG9kbyA9IGV4cG9ydHMuYWRkVG9kbyA9IHZvaWQgMDtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09IFwiW29iamVjdCBBcmd1bWVudHNdXCIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH1cblxuLy9CYXNpYyBGdW5jdGlvblxudmFyIGFkZFRvZG8gPSBmdW5jdGlvbiBhZGRUb2RvKHRvZG9zQmVmb3JlQWRkLCB0aXRsZSkge1xuICBpZiAodGl0bGUgIT09ICcnKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodG9kb3NCZWZvcmVBZGQpLCBbe1xuICAgICAgaWQ6IHRvZG9zQmVmb3JlQWRkLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5pZCA+IGIuaWQgPyBhLmlkIDogYi5pZDtcbiAgICAgIH0sIDApICsgMSxcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIGNvbXBsZXRlZDogZmFsc2VcbiAgICB9XSk7XG4gIH0gZWxzZSB7XG4gICAgYWxlcnQoXCJ1IG11c3QgdHlwZSBzb21ldGhpbmcgZmlyc3QgISFcIik7XG4gICAgcmV0dXJuIHRvZG9zQmVmb3JlQWRkO1xuICB9XG59O1xuXG5leHBvcnRzLmFkZFRvZG8gPSBhZGRUb2RvO1xuXG52YXIgcmVtb3ZlVG9kbyA9IGZ1bmN0aW9uIHJlbW92ZVRvZG8odG9kb3NCZWZvcmVSZW1vdmUsIF9yZWYpIHtcbiAgdmFyIGlkID0gX3JlZi5pZDtcbiAgcmV0dXJuIHRvZG9zQmVmb3JlUmVtb3ZlLmZpbHRlcihmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmlkICE9PSBpZDtcbiAgfSk7XG59O1xuXG5leHBvcnRzLnJlbW92ZVRvZG8gPSByZW1vdmVUb2RvO1xuXG52YXIgdXBkYXRlVG9kbyA9IGZ1bmN0aW9uIHVwZGF0ZVRvZG8odG9kb3NCZWZvcmVVcGRhdGUsIF9yZWYyKSB7XG4gIHZhciBpZCA9IF9yZWYyLmlkLFxuICAgICAgdGl0bGUgPSBfcmVmMi50aXRsZTtcblxuICB2YXIgdGVtcCA9IF90b0NvbnN1bWFibGVBcnJheSh0b2Rvc0JlZm9yZVVwZGF0ZSk7XG5cbiAgdGVtcFt0ZW1wLmZpbmRJbmRleChmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmlkID09PSBpZDtcbiAgfSldLnRpdGxlID0gdGl0bGU7XG4gIHJldHVybiB0ZW1wO1xufTtcblxuZXhwb3J0cy51cGRhdGVUb2RvID0gdXBkYXRlVG9kbztcblxudmFyIHRvZ2dsZVRvZG8gPSBmdW5jdGlvbiB0b2dnbGVUb2RvKHRvZG9zQmVmb3JlVXBkYXRlLCBfcmVmMykge1xuICB2YXIgaWQgPSBfcmVmMy5pZDtcblxuICB2YXIgdGVtcCA9IF90b0NvbnN1bWFibGVBcnJheSh0b2Rvc0JlZm9yZVVwZGF0ZSk7XG5cbiAgdmFyIGkgPSB0ZW1wLmZpbmRJbmRleChmdW5jdGlvbiAodG9kbykge1xuICAgIHJldHVybiB0b2RvLmlkID09PSBpZDtcbiAgfSk7XG4gIHRlbXBbaV0uY29tcGxldGVkID0gIXRlbXBbaV0uY29tcGxldGVkO1xuICByZXR1cm4gdGVtcDtcbn07XG5cbmV4cG9ydHMudG9nZ2xlVG9kbyA9IHRvZ2dsZVRvZG87XG5cbnZhciBjb21wbGV0ZUFsbCA9IGZ1bmN0aW9uIGNvbXBsZXRlQWxsKHRvZG9zKSB7XG4gIHJldHVybiB0b2Rvcy5tYXAoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5jb21wbGV0ZWQgPSB0cnVlO1xuICB9KTtcbn07XG5cbmV4cG9ydHMuY29tcGxldGVBbGwgPSBjb21wbGV0ZUFsbDtcblxudmFyIHVuY29tcGxldGVBbGwgPSBmdW5jdGlvbiB1bmNvbXBsZXRlQWxsKHRvZG9zKSB7XG4gIHJldHVybiB0b2Rvcy5tYXAoZnVuY3Rpb24gKHRvZG8pIHtcbiAgICByZXR1cm4gdG9kby5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLnVuY29tcGxldGVBbGwgPSB1bmNvbXBsZXRlQWxsO1xuXG52YXIgcmVtYWluaW5nVG9kb3MgPSBmdW5jdGlvbiByZW1haW5pbmdUb2Rvcyh0b2Rvcykge1xuICByZXR1cm4gdG9kb3MuZmlsdGVyKGZ1bmN0aW9uICh0b2RvKSB7XG4gICAgcmV0dXJuIHRvZG8uY29tcGxldGVkID09PSBmYWxzZTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLnJlbWFpbmluZ1RvZG9zID0gcmVtYWluaW5nVG9kb3M7XG5cbn0se31dfSx7fSxbMV0pO1xuIl19
